<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="version" content="0.0.0">
<title>onnx-modifier</title>
<link rel="stylesheet" type="text/css" href="view-main-page.css">
<link rel="stylesheet" type="text/css" href="view-grapher.css">
<link rel="stylesheet" type="text/css" href="view-sidebar.css">
<link rel="stylesheet" type="text/css" href="view-toolbar.css">
<link rel="shortcut icon" type="image/x-icon" href="favicon.png">
<script src="dagre.js"></script>
<script src="base.js"></script>
<script src="text.js"></script>
<script src="json.js"></script>
<script src="xml.js"></script>
<script src="python.js"></script>
<script src="protobuf.js"></script>
<script src="flatbuffers.js"></script>
<script src="zip.js"></script>
<script src="gzip.js"></script>
<script src="tar.js"></script>
<script src="view-grapher.js"></script>
<script src="view-sidebar.js"></script>
<script src="view.js"></script>
<script src="index.js"></script>
<script src="modifier.js"></script>

</head>
<body class="welcome">
<div class="main-page">
<div class="content">
<div class="toolbar-left">
    <div id="menu-button" class="icon toolbar-button">
        <div class="title"> Menu </div>
        <img src="svg/menu.svg"/>
    </div>

    <div id="open-file-button" class="icon toolbar-button">
        <div class="title"> Open Onnx File </div>
        <img src="svg/open.svg"/>
    </div>

    <div id="download-graph" class="icon toolbar-button">
        <div class="title"> Download </div>
        <img src="svg/save.svg"/>
    </div>
    

    <div id="reset-graph" class="icon toolbar-button" title="Roll back all modifications to the original model">
        <div class="title"> Reset </div>
        <img src="svg/reset.svg"/>
    </div>

    <div id="extract-graph" class="icon toolbar-button" title="Subnet export. start and end nodes need to be selected">
        <div class="title"> Extract Sub Network </div>
        <img src="svg/extract to.svg"/>
    </div>
    
    <img src="svg/分割线.svg" style="margin: 0 20px ;"/>

    <div id="add-node" class="icon toolbar-button">
        <div class="title"> Add Node </div>
        <img src="svg/add node.svg"/>
    </div>
    
    <img src="svg/分割线.svg" style="margin: 0 20px ;"/>

    <div id="onnxsim-graph" class="icon toolbar-button" title="Invoke onnxsim to optimize the entire network">
        <div class="title"> OnnxSim </div>
        <img src="svg/onnxsim.svg"/>
    </div>
    

    <div id="auto-optimizer-graph" class="icon toolbar-button" title="Invoke AutoOptimizer(surgeon) to optimize the entire network. It is an optimization tool based on the knowledge base. For details, see the AIT description document">
        <div class="title"> AutoOptimizer </div>
        <img src="svg/auto.svg"/>
    </div>
    
    <img src="svg/分割线.svg" style="margin: 0 20px ;"/>

    <div id="modify-export" class="icon toolbar-button" title="Export the current modification to a JSON file. You can import and apply these changes later">
        <div class="title"> Modifier Info Export </div>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cloud-arrow-down" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M7.646 10.854a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L8.5 9.293V5.5a.5.5 0 0 0-1 0v3.793L6.354 8.146a.5.5 0 1 0-.708.708l2 2z"/>
            <path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"/>
          </svg>
    </div>
    

    <div id="modify-import" class="icon toolbar-button" title="Import the JSON file and apply the saved modification steps">
        <div class="title"> Modifier Info Import </div>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cloud-arrow-up" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2z"/>
            <path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"/>
          </svg>
    </div>
</div>
<div id="graph" class="graph" tabindex="0">
    <svg id="canvas" class="canvas" preserveaspectratio="xMidYMid meet" width="100%" height="100%">   
        <g id="linecolor">
            <linearGradient id="gradient-start">
                <stop stop-color="red"></stop>
                <stop stop-color="red" offset="0.7"></stop>
                <stop stop-color="orange" offset="1"></stop>
            </linearGradient>
            <linearGradient id="gradient-end">
                <stop stop-color="orange"></stop>
                <stop stop-color="purple" offset="0.4"></stop>
                <stop stop-color="purple" offset="1"></stop>
            </linearGradient>
            <linearGradient id="gradient-start-end">
                <stop stop-color="red"></stop>
                <stop stop-color="orange" offset="0.5"></stop>
                <stop stop-color="purple" offset="1"></stop>
            </linearGradient>
        </g>
    </svg>
</div>
<div id="sidebar" class="sidebar"></div>
<div id="toolbar" class="toolbar">
    <button id="zoom-in-button" class="toolbar-button" title="Zoom In">
        <svg class="icon" viewbox="0 0 100 100">
            <circle class="border" cx="50" cy="50" r="35" stroke-width="8" stroke="#fff"></circle>
            <line class="border" x1="50" y1="38" x2="50" y2="62" stroke-width="8" stroke-linecap="round" stroke="#fff"></line>
            <line class="border" x1="38" y1="50" x2="62" y2="50" stroke-width="8" stroke-linecap="round" stroke="#fff"></line>
            <line class="border" x1="78" y1="78" x2="82" y2="82" stroke-width="12" stroke-linecap="square" stroke="#fff"></line>
            <circle class="stroke" cx="50" cy="50" r="35" stroke-width="4"></circle>
            <line class="stroke" x1="50" y1="38" x2="50" y2="62" stroke-width="4" stroke-linecap="round"></line>
            <line class="stroke" x1="38" y1="50" x2="62" y2="50" stroke-width="4" stroke-linecap="round"></line>
            <line class="stroke" x1="78" y1="78" x2="82" y2="82" stroke-width="8" stroke-linecap="square"></line>
        </svg>
    </button>

    <button id="zoom-out-button" class="toolbar-button" title="Zoom Out">
        <svg class="icon" viewbox="0 0 100 100">
            <circle class="border" cx="50" cy="50" r="35" stroke-width="8" stroke="#fff"></circle>
            <line class="border" x1="38" y1="50" x2="62" y2="50" stroke-width="8" stroke-linecap="round" stroke="#fff"></line>
            <line class="border" x1="78" y1="78" x2="82" y2="82" stroke-width="12" stroke-linecap="square" stroke="#fff"></line>
            <circle class="stroke" cx="50" cy="50" r="35" stroke-width="4"></circle>
            <line class="stroke" x1="38" y1="50" x2="62" y2="50" stroke-width="4" stroke-linecap="round"></line>
            <line class="stroke" x1="78" y1="78" x2="82" y2="82" stroke-width="8" stroke-linecap="square"></line>
        </svg>
    </button>
    <button id="back-button" class="toolbar-back-button" title="Back">
        &#x276E;
    </button>
    <button id="name-button" class="toolbar-name-button" title="Name">
    </button>
    <div id="menu-dropdown" class="dropdown"></div>
</div>
</div>
</div>
<div class="center logo">
    <a href="https://gitee.com/ascend/ait" target="blank_">
        <svg class="" viewbox="0 0 5120 300">
           <g style="font-size:240pt" >
               <text class="logo-fill" x=200 y=260 textLength="2560">Ascend's</text>
           </g>        
       </svg>
   </a>
    <a href="https://gitee.com/ascend/ait/tree/master/onnx-modifier" target="blank_">
        <img src="./svg/logo.svg"
             title="onnx-modifier is a tool to modify onnx models in a visualization fashion. It is built based on Netron and flask."
             height="130">
    </a>

    <button id="open-file-button-logo" class="center open-file-button">Open Model&hellip;</button>
    <button id="github-button" class="center github-button">Gitee repo</button>
    <input type="file" id="open-file-dialog" class="open-file-dialog" multiple="false" accept=".onnx, .ort, .pb, .meta, .tflite, .lite, .tfl, .keras, .h5, .hd5, .hdf5, .json, .model, .mar, .params, .param, .armnn, .mnn, .ncnn, .tnnproto, .tmfile, .ms, .nn, .uff, .rknn, .xmodel, .kmodel, .paddle, .pdmodel, .pdparams, .nb, .dnn, .cmf, .mlmodel, .mlpackage, .caffemodel, .pbtxt, .prototxt, .pkl, .pt, .pth, .ptl, .t7, .joblib, .cfg, .xml, .zip, .tar">
    <input type="file" id="open-modify-json-dialog" class="open-file-dialog" multiple="false" accept=".json">
    <!-- Preload fonts to workaround Chrome SVG layout issue -->
    <div style="font-weight: normal; color: rgba(0, 0, 0, 0.01); user-select: none;">.</div>
    <div style="font-weight: bold; color: rgba(0, 0, 0, 0.01); user-select: none;">.</div>
    <div style="font-weight: bold; color: rgba(0, 0, 0, 0.01); user-select: none;">.</div>
</div>
<div id="transparent" class="transparent"></div>
<!-- dialogs -->
<dialog id="show-message-alert" class="message-box dialog"> 
    <h1> </h1>
    <div class="text"> </div>
    <div class="footer"><button onclick="document.getElementById('show-message-alert').close()">OK</button></div>
</dialog>
<dialog id="show-message-confirm" class="message-box confirm-message-box dialog"> 
    <h1> </h1>
    <div class="text"> </div>
    <div class="footer">
        <button>Cancel</button>
        <button>OK</button>
    </div>
</dialog>
<dialog id="show-message-info" open></dialog>
<dialog id="show-about" class="dialog about message-box">
    <a href="https://gitee.com/ascend/ait" target="blank_">
        <svg class="logo-name" viewbox="0 0 5120 300">
           <g style="font-size:240pt" >
               <text class="logo-fill" x=200 y=260 textLength="2560">Ascend's</text>
           </g>        
       </svg>
   </a>
    <a href="https://gitee.com/ascend/ait/tree/master/onnx-modifier" target="blank_">
        <img src="./svg/logo.svg"
             title="onnx-modifier is a tool to modify onnx models in a visualization fashion. It is built based on Netron and flask."
             height="130px">
    </a>

    <div class="logo-message">
        <div style="height: 30px; text-align: center;">Version <span id="version" class="select">{version}</span></div>
        <div style="height: 30px; text-align: center;">Copyright &copy; <a href="https://gitee.com/ascend/ait/" target="blank_">Ascend</a></div>
        <div style="height: 30px; text-align: center;">Thanks <a href="https://github.com/ZhangGe6" target="blank_">ZhangGe6</a></div>
    </div>
    
    <div class="footer"><button onclick="document.getElementById('show-about').close()">OK</button></div>
</dialog>

<dialog id="download-dialog" class="dialog message-box"> 
    <input type="checkbox" id="shapeInference" class="download-checkbox-shapeInference"/> 
    <input type="text" value="shape inference" class="download-anno-shapeInference" readonly/> </td>
    <input type="checkbox" id="cleanUp" class="download-checkbox-cleanUp"/> 
    <input type="text" value="clean up" class="download-anno-cleanUp" readonly/> </td>
    <div class="footer">
        <button>Cancel</button>
        <button>OK</button>
    </div>
</dialog>
<dialog id="addnode-dialog" class="dialog message-box"> 
    <h1> Add New Node </h1>
    <select id="add-node-dropdown" class="graph-op-add-node-dropdown">
    </select>
    <div class="footer">
        <button>Cancel</button>
        <button>OK</button>
    </div>
</dialog>
<dialog id="addinput-dialog" class="dialog message-box"> 
    <h1> Add New Input </h1>
    <div class="text"> </div>
    <div style="display: flex; margin: 5px; justify-content: center;">
        <select id="add-input-dropdown" class="graph-op-add-node-dropdown">
        </select>
    </div>
    <div class="footer">
        <button>Cancel</button>
        <button>OK</button>
    </div>
</dialog>
<dialog id="change-input-shape-dialog" class="dialog message-box"> 
    <h1> Change Input Shape </h1>
    <div class="text"> </div>
    <div style="display: flex; margin: 5px; justify-content: center; flex-direction: column;">
        <err_msg> </err_msg>
        <input id="change-input-shape-input" type="text" size="32" placeholder="example: batch,3,224,224"/>
        <div>
            <input type="checkbox" class="checkbox-shape-change" checked /> 
            <span class="download-anno-cleanUp"> shape inference </span>
        </div>
    </div>
    
    <div class="footer">
        <button>Cancel</button>
        <button id="change-input-shape-input-ok">OK</button>
    </div>
</dialog>
<dialog id="dynamic-batch-size-dialog" class="dialog message-box"> 
    <h1> Dynamic Input Batch Size </h1>
    <div>
        <err_msg> </err_msg>
        <input type="checkbox" class="checkbox-shape-change" checked /> 
        <span class="download-anno-cleanUp"> shape inference </span>
    </div>
    <div class="footer">
        <button>Cancel</button>
        <button id="dynamic-batch-size-input-ok">OK</button>
    </div>
</dialog>
<dialog id="fixed-batch-size-dialog" class="dialog message-box"> 
    <h1> Fixed Input Batch Size </h1>
    <div class="text"> Please enter batchsize </div>
    <div style="display: flex; margin: 5px; justify-content: center; flex-direction: column;">
        <err_msg> </err_msg>
        <input id="fixed-batch-size-input" type="text" size="32"/>
        <div>
            <input type="checkbox" class="checkbox-shape-change" checked /> 
            <span class="download-anno-cleanUp"> shape inference  </span>
        </div>
    </div>
    <div class="footer">
        <button>Cancel</button>
        <button id="fixed-batch-size-input-ok">OK</button>
    </div>
</dialog>
</body>
</html>